[gd_scene load_steps=50 format=3 uid="uid://bageed5ytib7"]

[ext_resource type="Script" uid="uid://dcqel6tpsbeg5" path="res://scripts/scene_structure/main_root_node.gd" id="1_f2o31"]
[ext_resource type="Script" uid="uid://bsccsmledbxbs" path="res://scripts/ecs/systems/s_input_system.gd" id="1_pybrx"]
[ext_resource type="Script" uid="uid://d4jv6x1m1qr4i" path="res://scripts/scene_structure/environment_group.gd" id="2_8soux"]
[ext_resource type="Script" uid="uid://biqa541wtn26y" path="res://scripts/scene_structure/scene_objects_group.gd" id="2_ph0bl"]
[ext_resource type="Script" uid="uid://drqywr42vxyud" path="res://scripts/ecs/systems/s_jump_system.gd" id="2_rfthe"]
[ext_resource type="Script" uid="uid://bgnsh0o3wra1n" path="res://scripts/scene_structure/systems_group.gd" id="3_ph0bl"]
[ext_resource type="Script" uid="uid://c4e4hlymefb77" path="res://scripts/scene_structure/systems_core_group.gd" id="3_systems_core"]
[ext_resource type="Script" uid="uid://b4sme8c1pqnrd" path="res://scripts/scene_structure/systems_feedback_group.gd" id="3_systems_feedback"]
[ext_resource type="Script" uid="uid://ddn3u13llflav" path="res://scripts/scene_structure/systems_movement_group.gd" id="3_systems_movement"]
[ext_resource type="Script" uid="uid://dg6boicav68qc" path="res://scripts/scene_structure/systems_physics_group.gd" id="3_systems_physics"]
[ext_resource type="Script" uid="uid://cpf4nf40ofvnf" path="res://scripts/ecs/systems/s_gravity_system.gd" id="3_xnqit"]
[ext_resource type="Script" uid="uid://dqmp6mj101ily" path="res://scripts/ecs/systems/s_movement_system.gd" id="4_vry44"]
[ext_resource type="Script" uid="uid://djggd1n130ax6" path="res://scripts/ecs/systems/s_rotate_to_input_system.gd" id="5_r0a6q"]
[ext_resource type="Script" uid="uid://bj50lxnot37ba" path="res://scripts/managers/m_ecs_manager.gd" id="6_0e7m3"]
[ext_resource type="Script" uid="uid://blh5rcefesvhl" path="res://scripts/ecs/systems/s_floating_system.gd" id="6_tnjgn"]
[ext_resource type="PackedScene" uid="uid://cyu3l6we2jq23" path="res://templates/player_template.tscn" id="7_4wxy1"]
[ext_resource type="Script" uid="uid://c8ass3lvev88k" path="res://scripts/ecs/systems/s_align_with_surface_system.gd" id="7_awem0"]
[ext_resource type="Script" uid="uid://dgf540va7nevu" path="res://scripts/ecs/systems/s_landing_indicator_system.gd" id="8_ey5t3"]
[ext_resource type="Script" uid="uid://btv2kb8firb4t" path="res://scripts/ecs/systems/s_damage_system.gd" id="9_damage"]
[ext_resource type="Script" uid="uid://5f8pn1tlew0i" path="res://scripts/ecs/systems/s_health_system.gd" id="9_health"]
[ext_resource type="Script" uid="uid://inbnerw83pve" path="res://scripts/ecs/systems/s_jump_particles_system.gd" id="9_jump_particles"]
[ext_resource type="Resource" uid="uid://cd2l2cajwt23m" path="res://resources/settings/jump_particles_default.tres" id="9_jump_particles_settings"]
[ext_resource type="Script" uid="uid://cu3er3y1tl8r3" path="res://scripts/ecs/systems/s_jump_sound_system.gd" id="9_jump_sound"]
[ext_resource type="Script" uid="uid://c0q5fgkbsulke" path="res://scripts/ecs/systems/s_pause_system.gd" id="9_pause"]
[ext_resource type="Script" uid="uid://bc1ae47bo4m04" path="res://scripts/ecs/systems/s_victory_system.gd" id="9_victory"]
[ext_resource type="Script" uid="uid://b5g6xp0umxfy4" path="res://scripts/ecs/systems/s_landing_particles_system.gd" id="10_landing_particles"]
[ext_resource type="Resource" uid="uid://oxvahsme8310" path="res://resources/settings/landing_particles_default.tres" id="10_landing_particles_settings"]
[ext_resource type="PackedScene" uid="uid://c8v4h1sdtyhps" path="res://scenes/ui/hud_overlay.tscn" id="11_hud"]
[ext_resource type="Script" uid="uid://d0n2a3p3tkdq0" path="res://scripts/scene_structure/managers_group.gd" id="12_klon2"]
[ext_resource type="Script" uid="uid://mm82rwglfuba" path="res://scripts/scene_structure/entities_group.gd" id="16_8qi87"]
[ext_resource type="PackedScene" uid="uid://4f8xryxbxit0" path="res://templates/camera_template.tscn" id="19_ph0bl"]
[ext_resource type="Script" uid="uid://dtaup85wkpxg0" path="res://scripts/ecs/systems/s_scene_trigger_system.gd" id="20_scene_trigger_system"]
[ext_resource type="Script" uid="uid://u7yf4vdyvkmx" path="res://scripts/scene_structure/spawn_points_group.gd" id="21_spawnpoints"]
[ext_resource type="Script" uid="uid://b420jsnbnxfy8" path="res://scripts/ecs/systems/s_touchscreen_system.gd" id="24_touchscreen_system"]
[ext_resource type="Resource" uid="uid://b2rj71hlyc628" path="res://resources/triggers/rs_cylinder_wide_door_trigger_settings.tres" id="30_auc1c"]
[ext_resource type="Script" uid="uid://ccm1a2gahhbye" path="res://scripts/gameplay/e_door_trigger_controller.gd" id="30_door_controller"]
[ext_resource type="Resource" uid="uid://death0onevol1" path="res://resources/triggers/rs_death_zone_volume.tres" id="44_death_settings"]
[ext_resource type="Resource" uid="uid://m0goalcyl001" path="res://resources/triggers/rs_goal_cylinder.tres" id="44_goal_settings"]
[ext_resource type="Script" uid="uid://df16oscnvlau8" path="res://scripts/gameplay/e_hazard_zone.gd" id="44_hazard_controller"]
[ext_resource type="Script" uid="uid://d3l2saw67j1so" path="res://scripts/gameplay/e_victory_zone.gd" id="44_victory_controller"]
[ext_resource type="Script" uid="uid://dr277k25nhehf" path="res://scripts/gameplay/e_signpost.gd" id="45_signpost_controller"]
[ext_resource type="Resource" uid="uid://b2ehbrq1l8yro" path="res://resources/triggers/rs_signpost_cylinder.tres" id="45_signpost_settings"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_q3o1v"]
shading_mode = 0
diffuse_mode = 3
specular_mode = 1
albedo_color = Color(0.6, 0.4, 0.2, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_748a2"]
shading_mode = 0
diffuse_mode = 3
specular_mode = 1

[sub_resource type="Environment" id="Environment_q3o1v"]
background_mode = 1
background_color = Color(0.3019608, 0.60784316, 0.9019608, 1)
ambient_light_source = 3

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_ee6xw"]
shading_mode = 0
albedo_color = Color(0.9828339, 0, 0.010878513, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_goal"]
albedo_color = Color(0.968627, 0.847059, 0.239216, 1)
emission_enabled = true
emission = Color(1, 0.843137, 0.223529, 1)
emission_energy_multiplier = 1.5

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_goal_text"]

[sub_resource type="TextMesh" id="TextMesh_goal"]
material = SubResource("StandardMaterial3D_goal_text")
text = ":)"

[node name="GameplayRoot" type="Node3D"]
script = ExtResource("1_f2o31")

[node name="SceneObjects" type="Node3D" parent="."]
script = ExtResource("2_ph0bl")

[node name="SO_Floor" type="CSGBox3D" parent="SceneObjects"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -2, 0)
material_override = SubResource("StandardMaterial3D_q3o1v")
use_collision = true
size = Vector3(25, 1, 25)
material = SubResource("StandardMaterial3D_748a2")

[node name="SO_Block3" type="CSGBox3D" parent="SceneObjects"]
transform = Transform3D(-0.69425654, -0.7197277, 0, 0.7197277, -0.69425654, 0, 0, 0, 1, -4.044385, 0.110826224, -3.1731567)
use_collision = true
size = Vector3(8, 1, 3.1923828)
material = SubResource("StandardMaterial3D_748a2")

[node name="Environment" type="Node" parent="."]
script = ExtResource("2_8soux")

[node name="Env_WorldEnvironment" type="WorldEnvironment" parent="Environment"]
environment = SubResource("Environment_q3o1v")

[node name="Env_DirectionalLight3D" type="DirectionalLight3D" parent="Environment"]
transform = Transform3D(1, 0, 0, 0, 0.9385653, 0.34510165, 0, -0.34510165, 0.9385653, 0, 0, 0)
light_color = Color(0.56078434, 0.827451, 1, 1)
light_energy = 12.026
light_indirect_energy = 4.482

[node name="Systems" type="Node" parent="."]
script = ExtResource("3_ph0bl")

[node name="Core" type="Node" parent="Systems"]
script = ExtResource("3_systems_core")

[node name="S_InputSystem" type="Node" parent="Systems/Core"]
script = ExtResource("1_pybrx")
require_captured_cursor = true

[node name="S_TouchscreenSystem" type="Node" parent="Systems/Core"]
script = ExtResource("24_touchscreen_system")

[node name="S_PauseSystem" type="Node" parent="Systems/Core"]
script = ExtResource("9_pause")
execution_priority = 5

[node name="S_HealthSystem" type="Node" parent="Systems/Core"]
script = ExtResource("9_health")
execution_priority = 200

[node name="S_DamageSystem" type="Node" parent="Systems/Core"]
script = ExtResource("9_damage")
execution_priority = 250

[node name="S_VictorySystem" type="Node" parent="Systems/Core"]
script = ExtResource("9_victory")
execution_priority = 300

[node name="S_SceneTriggerSystem" type="Node" parent="Systems/Core"]
script = ExtResource("20_scene_trigger_system")

[node name="Physics" type="Node" parent="Systems"]
script = ExtResource("3_systems_physics")

[node name="S_GravitySystem" type="Node" parent="Systems/Physics"]
script = ExtResource("3_xnqit")
execution_priority = 60

[node name="S_JumpSystem" type="Node" parent="Systems/Physics"]
script = ExtResource("2_rfthe")
execution_priority = 75

[node name="Movement" type="Node" parent="Systems"]
script = ExtResource("3_systems_movement")

[node name="S_MovementSystem" type="Node" parent="Systems/Movement"]
script = ExtResource("4_vry44")
execution_priority = 50

[node name="S_FloatingSystem" type="Node" parent="Systems/Movement"]
script = ExtResource("6_tnjgn")
execution_priority = 70

[node name="S_RotateToInputSystem" type="Node" parent="Systems/Movement"]
script = ExtResource("5_r0a6q")
execution_priority = 80

[node name="S_AlignWithSurfaceSystem" type="Node" parent="Systems/Movement"]
script = ExtResource("7_awem0")
execution_priority = 90

[node name="Feedback" type="Node" parent="Systems"]
script = ExtResource("3_systems_feedback")

[node name="S_LandingIndicatorSystem" type="Node" parent="Systems/Feedback"]
script = ExtResource("8_ey5t3")
execution_priority = 110

[node name="S_JumpParticlesSystem" type="Node" parent="Systems/Feedback"]
script = ExtResource("9_jump_particles")
settings = ExtResource("9_jump_particles_settings")
execution_priority = 120

[node name="S_JumpSoundSystem" type="Node" parent="Systems/Feedback"]
script = ExtResource("9_jump_sound")
execution_priority = 121

[node name="S_LandingParticlesSystem" type="Node" parent="Systems/Feedback"]
script = ExtResource("10_landing_particles")
settings = ExtResource("10_landing_particles_settings")
execution_priority = 122

[node name="Managers" type="Node" parent="."]
script = ExtResource("12_klon2")

[node name="M_ECSManager" type="Node" parent="Managers"]
script = ExtResource("6_0e7m3")

[node name="Entities" type="Node" parent="."]
script = ExtResource("16_8qi87")

[node name="E_Player" parent="Entities" instance=ExtResource("7_4wxy1")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.190454, 1.0887601, 1.7809162)

[node name="E_Camera" parent="Entities" instance=ExtResource("19_ph0bl")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.8, 4.5)

[node name="E_PlayerCamera" parent="Entities/E_Camera" index="0"]
fov = 65.0

[node name="E_DoorTrigger" type="Node3D" parent="Entities"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5, 0, 0)
script = ExtResource("30_door_controller")
door_id = &"door_to_exterior"
target_scene_id = &"exterior"
target_spawn_point = &"sp_exit_from_house"
settings = ExtResource("30_auc1c")
visual_paths = Array[NodePath]([NodePath("DoorVisual")])

[node name="DoorVisual" type="CSGCylinder3D" parent="Entities/E_DoorTrigger"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.57354736, 0)
material_overlay = SubResource("StandardMaterial3D_ee6xw")
radius = 0.7910156
height = 2.0715332

[node name="E_Hazards" type="Node" parent="Entities"]
script = ExtResource("16_8qi87")

[node name="E_DeathZone" type="Node3D" parent="Entities/E_Hazards"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -10, 0)
script = ExtResource("44_hazard_controller")
is_instant_death = true
settings = ExtResource("44_death_settings")

[node name="E_Objectives" type="Node" parent="Entities"]
script = ExtResource("16_8qi87")

[node name="E_GoalZone" type="Node3D" parent="Entities/E_Objectives"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4, -0.41013765, -10.004155)
script = ExtResource("44_victory_controller")
objective_id = &"goal_interior"
area_id = "interior_house"
settings = ExtResource("44_goal_settings")
visual_paths = Array[NodePath]([NodePath("Visual"), NodePath("Sparkles"), NodePath("GlowLight")])

[node name="Visual" type="CSGCylinder3D" parent="Entities/E_Objectives/E_GoalZone"]
radius = 1.5
material = SubResource("StandardMaterial3D_goal")

[node name="GlowLight" type="OmniLight3D" parent="Entities/E_Objectives/E_GoalZone"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
light_color = Color(1, 0.87451, 0.364706, 1)
light_energy = 2.0

[node name="Sparkles" type="CPUParticles3D" parent="Entities/E_Objectives/E_GoalZone"]
amount = 80
lifetime = 1.5
preprocess = 0.5
mesh = SubResource("TextMesh_goal")

[node name="E_TutorialSign_Interior" type="Node3D" parent="Entities"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.14, 0, 2)
script = ExtResource("45_signpost_controller")
message = "Welcome inside!"
settings = ExtResource("45_signpost_settings")
visual_paths = Array[NodePath]([NodePath("Visual"), NodePath("GlowLight")])

[node name="Visual" type="CSGCylinder3D" parent="Entities/E_TutorialSign_Interior"]
radius = 0.25
height = 1.0

[node name="GlowLight" type="OmniLight3D" parent="Entities/E_TutorialSign_Interior"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.6, 0)
light_color = Color(0.8, 0.9, 1, 1)
light_energy = 1.5
omni_range = 1.863689

[node name="SP_SpawnPoints" type="Node3D" parent="."]
script = ExtResource("21_spawnpoints")

[node name="sp_default" type="Node3D" parent="SP_SpawnPoints"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.7123368, 1.0887601, 1.7809162)
script = ExtResource("21_spawnpoints")

[node name="sp_entrance_from_exterior" type="Node3D" parent="SP_SpawnPoints"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4.3252916, -0.40663242, 1.4185565)
script = ExtResource("21_spawnpoints")

[node name="HUD" parent="." instance=ExtResource("11_hud")]

[editable path="Entities/E_Camera"]
